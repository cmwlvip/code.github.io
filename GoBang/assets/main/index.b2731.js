window.__require=function t(e,r,o){function i(a,n){if(!r[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!n&&h)return h(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var d=r[a]={exports:{}};e[a][0].call(d.exports,function(t){return i(e[a][1][t]||t)},d,d.exports,t,e,r,o)}return r[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({ChessBoard:[function(t,e,r){"use strict";cc._RF.push(e,"86ae6/MjfBM8opUt7n0gF8t","ChessBoard");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__decorate||function(t,e,r,o){var i,s=arguments.length,a=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var n=t.length-1;n>=0;n--)(i=t[n])&&(a=(s<3?i(a):s>3?i(e,r,a):i(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,c=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chessPrefab_black=null,e.chessPrefab_white=null,e.restart=null,e.start_board=null,e.Tip_board=null,e.startGame=null,e.num=0,e._board=[],e.isPlayGame=!1,e.isRestart=!1,e}return i(e,t),e.prototype.initBoard=function(){for(var t=0;t<18;t++){this._board[t]=[];for(var e=0;e<18;e++)this._board[t][e]=0}},e.prototype.playGame=function(){this.isRestart?cc.director.loadScene("game"):(this.startGame.active=!1,this.isPlayGame=!0)},e.prototype.restartGame=function(){this.startGame.active=!0,this.startGame.getComponent(cc.Sprite).spriteFrame=this.restart,this.startGame.removeAllChildren(),this.startGame.scale=.5,this.startGame.opacity=200,this.isRestart=!0},e.prototype.isPlayChess=function(t,e){if(0!=this._board[t][e])return cc.log("\u6b64\u5904\u5df2\u6709\u68cb\u5b50"),!1;if(0==t||0==e||17==t||17==e){var r=cc.instantiate(this.Tip_board);return this.node.addChild(r),r.setPosition(cc.v2(425,500)),setTimeout(function(){r.destroy()}.bind(this),500),!1}return!0},e.prototype.setNewChess=function(t){if(cc.log(this.isPlayGame),this.isPlayGame){var e=t.getLocation(),r=this.node.convertToNodeSpaceAR(e),o=Math.round(r.x/50),i=Math.round(r.y/50),s=cc.v2(50*o,50*i),a=cc.v2(o,i);if(this.num%2==0&&this.isPlayChess(a.x,a.y)){var n=cc.instantiate(this.chessPrefab_black);if(this.node.addChild(n),n.setPosition(s),this._board[a.x][a.y]=1,this.judge(1,a)){cc.log("\u9ed1\u80dc");var c=cc.instantiate(this.start_board);this.node.addChild(c),c.children[1].color=cc.Color.BLACK,c.setPosition(cc.v2(425,325)),this.restartGame()}this.num+=1}else if(this.num%2==1&&this.isPlayChess(a.x,a.y)){var h=cc.instantiate(this.chessPrefab_white);this.node.addChild(h),h.setPosition(s),this._board[a.x][a.y]=2,this.judge(2,a)&&(cc.log("\u767d\u80dc"),(c=cc.instantiate(this.start_board)).children[1].getComponent(cc.Label).string="\u767d\u68cb",this.node.addChild(c),c.setPosition(cc.v2(425,325)),this.restartGame()),this.num+=1}}},e.prototype.judge=function(t,e){return!!(this.judge_row(t,e)||this.judge_list(t,e)||this.judge_left(t,e)||this.judge_right(t,e))&&(this.isPlayGame=!1,!0)},e.prototype.judge_row=function(t,e){for(var r=0,o=1;this._board[e.x+o][e.y]==t;)r+=1,o+=1;for(o=1;this._board[e.x-o][e.y]==t;)r+=1,o+=1;return!(r<4)},e.prototype.judge_list=function(t,e){for(var r=0,o=1;this._board[e.x][e.y+o]==t;)r+=1,o+=1;for(o=1;this._board[e.x][e.y-o]==t;)r+=1,o+=1;return!(r<4)},e.prototype.judge_left=function(t,e){for(var r=0,o=1;this._board[e.x+o][e.y+o]==t;)r+=1,o+=1;for(o=1;this._board[e.x-o][e.y-o]==t;)r+=1,o+=1;return!(r<4)},e.prototype.judge_right=function(t,e){for(var r=0,o=1;this._board[e.x-o][e.y+o]==t;)r+=1,o+=1;for(o=1;this._board[e.x+o][e.y-o]==t;)r+=1,o+=1;return!(r<4)},e.prototype.onLoad=function(){this.startGame=cc.find("Canvas/btn_start"),this.node.on("touchstart",this.setNewChess,this)},e.prototype.start=function(){this.initBoard()},s([c(cc.Prefab)],e.prototype,"chessPrefab_black",void 0),s([c(cc.Prefab)],e.prototype,"chessPrefab_white",void 0),s([c(cc.SpriteFrame)],e.prototype,"restart",void 0),s([c(cc.Prefab)],e.prototype,"start_board",void 0),s([c(cc.Prefab)],e.prototype,"Tip_board",void 0),s([n],e)}(cc.Component);r.default=h,cc._RF.pop()},{}]},{},["ChessBoard"]);